<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DSU Admission Form</title>
<link rel="stylesheet" href="../style.css" />

<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

    /* Theme Variables */
    :root {
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --text-primary: #002f6c;
        --text-secondary: rgba(0,47,108,0.7);
        --border-color: #e1e5e9;
        --input-bg: #ffffff;
        --input-border: #ddd;
    }

    [data-theme="dark"] {
        --bg-primary: #1a1a1a;
        --bg-secondary: #2d2d2d;
        --text-primary: #ffffff;
        --text-secondary: rgba(255,255,255,0.7);
        --border-color: #404040;
        --input-bg: #333333;
        --input-border: #555;
    }

    /* Theme Toggle */
    .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 25px;
        padding: 8px 16px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--text-primary);
        font-size: 14px;
        transition: all 0.3s ease;
    }
    .theme-toggle:hover { transform: scale(1.05); }
    .theme-icon { font-size: 16px; }

    .form-container {
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
    }
    .form-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    body { background: var(--bg-primary); color: var(--text-primary); transition: all 0.3s ease; }
     @keyframes pop { from{opacity:0; transform: translateY(18px) scale(.98)} to{opacity:1; transform:none} }
 
     /* decorative header */
    .form-header {
        display:flex;
        gap:16px;
        align-items:center;
        margin-bottom:20px;
        background: #0073e6;
        color: #ffffff;
        padding: 16px;
        border-radius: 10px;
    }
    .logo {
        width:62px;
        height:62px;
        border-radius:10px;
        display:grid;
        place-items:center;
        background: #ffffff;
        box-shadow: 0 6px 18px rgba(0,0,0,0.08);
        overflow:hidden;
        transform: none;
    }
    .logo img { width:100%; height:100%; object-fit:contain; display:block; }
    h2 {
        margin:0;
        font-size:18px;
        font-weight:700;
        letter-spacing:0.2px;
        color: #ffffff; /* header text white per spec */
    }
    .sub {
        font-size:12px;
        color: rgba(255,255,255,0.85);
        margin-top:4px;
    }
 
     /* form layout */
     form#admissionForm {
         margin-top:16px;
         display:grid;
         grid-template-columns: repeat(2, 1fr);
         gap:14px;
         align-items:start;
     }
     .full { grid-column: 1 / -1; }
 
     .field {
         position:relative;
         transition: transform .25s ease;
     }
     .field:hover { transform: translateY(-4px); }
    .field input, .field select, .field textarea {
        width:100%;
        padding:14px 14px 14px 46px;
        border-radius:8px;
        border:1px solid var(--input-border);
        background:var(--input-bg);
        color:var(--text-primary);
        outline:none;
        font-size:14px;
    }
    .field textarea { min-height:96px; resize:vertical; padding-top:18px; }
    .field input:focus, .field textarea:focus, .field select:focus {
        border-color: var(--input-border-focus);
        box-shadow: 0 6px 18px rgba(0,47,108,0.08);
    }
 
     /* floating label */
     .field label {
         position:absolute;
         left:46px;
         top:50%;
         transform:translateY(-50%);
        color:var(--text-secondary);
         pointer-events:none;
         transition: all .22s ease;
         font-size:13px;
         background:transparent;
         padding:0 6px;
     }
     .field input:not(:placeholder-shown) + label,
     .field textarea:not(:placeholder-shown) + label,
     .field select:focus + label,
     .field input:focus + label,
     .field textarea:focus + label {
         top:-8px;
         font-size:12px;
        color:var(--primary-blue);
         left:12px;
         background: rgba(0,0,0,0.25);
         border-radius:6px;
     }
 
     /* left icon in fields */
     .field .icon {
         position:absolute;
         left:12px;
         top:50%;
         transform:translateY(-50%);
         width:22px; height:22px;
         opacity:0.95;
         display:grid; place-items:center;
        color:var(--primary-blue);
        filter: drop-shadow(0 3px 8px rgba(2,47,108,0.06));
     }
 
     /* gender, course styling */
     select { -webkit-appearance:none; appearance:none; background-image: linear-gradient(45deg, transparent 50%, rgba(255,255,255,0.18) 50%), linear-gradient(135deg, rgba(255,255,255,0.18) 50%, transparent 50%); background-position: calc(100% - 14px) calc(1em + 2px), calc(100% - 10px) calc(1em + 2px); background-size: 6px 6px, 6px 6px; background-repeat: no-repeat; padding-right:18px; }
 

 
     /* submit/button */
     .actions { grid-column:1 / -1; display:flex; gap:12px; align-items:center; margin-top:6px; margin-bottom:8px; }
     .btn {
         padding:14px 18px;
         border-radius:12px;
         border:none;
         cursor:pointer;
         flex:1;
        color: var(--button-text);
        font-weight:700;
        background: #0073e6;
        box-shadow: 0 8px 20px rgba(0,47,108,0.06);
         position:relative;
         overflow:hidden;
         transition: transform .18s ease, box-shadow .18s ease;
     }
     .btn:active { transform: translateY(1px) scale(.998); }
     .btn.success { background: linear-gradient(90deg,#54f0b7,#00ffa1); color:#003; }
    .btn .tick {
        position:absolute; right:14px; top:50%; transform:translateY(-50%) scale(.9); opacity:0; transition: all .28s ease;
    }
    .btn.success .tick { opacity:1; transform:translateY(-50%) scale(1); }
    .btn:hover { background: #005bb5; color: #ffffff; }
 
     /* popup */
     .popup {
         position:fixed;
         left:50%;
         transform:translateX(-50%);
         bottom:-120px;
        background: var(--bg-secondary);
        padding:12px 18px;
        border-left:6px solid var(--success);
        border-radius:10px;
        color: var(--text-primary);
        font-weight:600;
         transition:all .45s cubic-bezier(.2,.9,.2,1);
         backdrop-filter: blur(8px);
         z-index:60;
     }
     .popup.show { bottom:28px; box-shadow: 0 18px 60px rgba(0,140,255,0.12); }
 
     /* small helper text */
    .hint { font-size:12px; color: rgba(2,47,108,0.7); margin-top:6px; }
 
     /* responsive */
     @media (max-width:820px){
         form#admissionForm { grid-template-columns: 1fr; }
         .avatar{ width:72px; height:72px; }
         /* stack photo area on small screens to avoid overlap */
         .photo-wrap { flex-direction:row; gap:10px; align-items:flex-start; }
         .photo-wrap input[type="file"] { margin-top:6px; }
     }
 
 </style>
</head>
<body>
    <div class="top-bar">
        <marquee class="announcement" direction="right" scrollamount="3">üìÖ ACADEMIC CALENDAR FOR 2025-26 ‚Äî <a href="#">CLICK HERE</a> TO APPLY FOR OCT 2025 EXECUTIVE MBA BATCH</marquee>
        <div class="top-bar-right">
            <input type="text" placeholder="Search ...">
            <button>Search</button>
        </div>
    </div>

    <div class="theme-toggle" onclick="toggleTheme()">
        <span class="theme-icon">üåô</span>
        <span class="theme-text">Dark</span>
    </div>

    <div class="header-top">
        <div class="header-content">
            <div class="logo-section">
                <img src="../ADDIMAGE/logo.png" alt="Institution logo" class="logo" >
                <div class="institution-info">
                    <h1>DAYANANDA SAGAR</h1>
                    <p>UNIVERSITY</p>
                </div>
            </div>
        </div>
    </div>

<div class="form-container">
    <div class="form-card">
    <div class="form-header">
        <div class="logo"><img src="../ADDIMAGE/logo.png" alt="DSU Logo" style="width:100%;height:100%;object-fit:contain;"></div>
        <div>
            <h2>Dayananda Sagar University</h2>
            <div class="sub">Admission Application ‚Äî Online Form</div>
        </div>
    </div>

    <form id="admissionForm" novalidate enctype="multipart/form-data">
        <div class="field">
            <div class="icon">üë§</div>
            <input type="text" id="name" placeholder=" " required autocomplete="name" />
            <label for="name">Full Name</label>
        </div>

        <div class="field">
            <div class="icon">üìÖ</div>
            <input type="date" id="dob" placeholder=" " required />
            <label for="dob">Date of Birth</label>
        </div>

        <div class="field">
            <div class="icon">‚öß</div>
            <select id="gender" required>
                <option value="" disabled selected hidden></option>
                <option>Male</option>
                <option>Female</option>
                <option>Other</option>
            </select>
            <label for="gender">Gender</label>
        </div>

        <div class="field">
            <div class="icon">‚úâ</div>
            <input type="email" id="email" placeholder=" " required autocomplete="email" />
            <label for="email">Email ID</label>
        </div>

        <div class="field">
            <div class="icon">üìû</div>
            <input type="tel" id="phone" placeholder=" " required title="Enter mobile number" />
             <label for="phone">Mobile Number</label>
         </div>

        <div class="field">
            <div class="icon">üéì</div>
            <select id="course" required>
                <option value="" disabled selected hidden></option>
                <option>B.Tech</option>
                <option>BCA</option>
                <option>BBA</option>
                <option>B.Com</option>
                <option>Pharmacy</option>
                <option>MBA</option>
                <option>M.Tech</option>
            </select>
            <label for="course">Course Applying For</label>
        </div>

        <div class="field full">
            <div class="icon">üè†</div>
            <textarea id="address" placeholder=" " required></textarea>
            <label for="address">Address</label>
        </div>

        <div class="field full">
            <div class="icon">üì∑</div>
            <input id="photo" type="file" accept="image/*" placeholder=" " />
            <label for="photo">Upload Photo (optional)</label>
            <div class="hint">Preferred: 1:1 ratio, under 2MB. A clear headshot improves verification.</div>
        </div>

        <div class="actions full">
            <button type="submit" class="btn" id="submitBtn">
                Submit Application
                <span class="tick">‚úî</span>
            </button>
        </div>

        <div class="hint full" id="liveHint">Fill the form and submit. We'll reach out within 3 working days.</div>
    </form>
</div>

<div class="popup" id="popup">‚úî Application Submitted Successfully. We will contact you shortly!</div>

<script>
/* basic interactive enhancements */
const form = document.getElementById('admissionForm');
const popup = document.getElementById('popup');
const submitBtn = document.getElementById('submitBtn');
const liveHint = document.getElementById('liveHint');
const phone = document.getElementById('phone');
const nameInput = document.getElementById('name');
const photoInput = document.getElementById('photo');

/* Theme Toggle */
function toggleTheme() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    
    const themeIcon = document.querySelector('.theme-icon');
    const themeText = document.querySelector('.theme-text');
    if (newTheme === 'dark') {
        themeIcon.textContent = '‚òÄÔ∏è';
        themeText.textContent = 'Light';
    } else {
        themeIcon.textContent = 'üåô';
        themeText.textContent = 'Dark';
    }
}

// Load saved theme
const savedTheme = localStorage.getItem('theme') || 'light';
document.documentElement.setAttribute('data-theme', savedTheme);
if (savedTheme === 'dark') {
    document.querySelector('.theme-icon').textContent = '‚òÄÔ∏è';
    document.querySelector('.theme-text').textContent = 'Light';
}


/* photo validation */
photoInput.addEventListener('change', (e)=>{
    const f = e.target.files && e.target.files[0];
    if(!f) return;
    if(f.size > 2_200_000){ alert('Photo too large. Please use file under ~2MB.'); e.target.value=''; return; }
});

/* phone formatting simple */
phone.addEventListener('input', (e) => {
    // keep only digits, limit to 10
    const digits = e.target.value.replace(/\D/g, '').slice(0, 10);
    // format as Indian 5+5 grouping: 99999 99999
    if (digits.length > 5) e.target.value = digits.slice(0, 5) + ' ' + digits.slice(5);
    else e.target.value = digits;
});

// validate on blur (any number of digits, minimum 7)
phone.addEventListener('blur', (e) => {
    const digits = e.target.value.replace(/\D/g, '');
    if (!digits) {
        phone.setCustomValidity('');
        return;
    }
    const ok = digits.length >= 7;
    phone.setCustomValidity(ok ? '' : 'Enter a valid mobile number (minimum 7 digits)');
    if (!ok) phone.reportValidity();
});
 
/* small live hint using name */
nameInput.addEventListener('input', ()=> {
    const v = nameInput.value.trim();
    liveHint.textContent = v ? Hello `${v.split(' ')[0]} ‚Äî please review your details before submitting.` : 'Fill the form and submit. We will reach out within 3 working days.';
});

/* submit behavior with backend integration */
form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    
    // simple HTML validity check
    if(!form.checkValidity()){
        form.reportValidity();
        return;
    }

    // animate submit button
    submitBtn.classList.add('success');
    submitBtn.disabled = true;
    submitBtn.textContent = 'Submitting...';

    try {
        // Create FormData object
        const formData = new FormData();
        formData.append('name', document.getElementById('name').value);
        formData.append('dob', document.getElementById('dob').value);
        formData.append('gender', document.getElementById('gender').value);
        formData.append('email', document.getElementById('email').value);
        formData.append('phone', document.getElementById('phone').value);
        formData.append('course', document.getElementById('course').value);
        formData.append('address', document.getElementById('address').value);
        
        // Add photo if selected
        const photoFile = photoInput.files[0];
        if (photoFile) {
            formData.append('photo', photoFile);
        }

        // Submit to backend
        const response = await fetch('http://localhost:3000/api/submit-application', {
            method: 'POST',
            body: formData
        });

        const result = await response.json();

        if (result.success) {
            // Success animation
            submitBtn.textContent = 'Submitted';
            const tick = document.createElement('span');
            tick.className = 'tick'; tick.textContent = '‚úî';
            submitBtn.appendChild(tick);
            
            // Show success popup
            popup.textContent = `‚úî Application submitted successfully! Your USN: ${result.usn}. We will contact you shortly.`;
            popup.classList.add('show');
            setTimeout(()=> popup.classList.remove('show'), 5000);
            
            // Reset form after delay
            setTimeout(()=>{
                submitBtn.classList.remove('success');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Application';
                form.reset();
                liveHint.textContent = 'Thank you ‚Äî form submitted successfully!';

            }, 2000);
        } else {
            throw new Error(result.message || 'Submission failed');
        }
    } catch (error) {
        console.error('Submission error:', error);
        
        // Error handling
        submitBtn.classList.remove('success');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Application';
        
        popup.textContent = '‚ùå ' + (error.message || 'Network error. Please check if the server is running and try again.');
        popup.style.borderLeftColor = '#ff4757';
        popup.classList.add('show');
        setTimeout(()=> {
            popup.classList.remove('show');
            popup.style.borderLeftColor = 'var(--success)';
        }, 4000);
    }
});
</script>

      <div class="social-sidebar">
        <a
          href="RegistartionForm.html"
          title="Apply Now"
          class="apply-now-btn"
        >
          APPLY NOW
        </a>
        <a
          href="https://www.linkedin.com/school/dayananda-sagar-university-bangalore/"
          title="LinkedIn"
        >
          <i class="fa-brands fa-linkedin"></i>
        </a>
        <a
          href="https://www.instagram.com/dayanandasagaruniversityblr?igsh=MXg1NHk4bGJremdnMw=="
          title="Instagram"
        >
          <i class="fa-brands fa-instagram"></i>
        </a>
      </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h4>ADMISSIONS</h4>
                <ul>
                    <li><a href="student-lookup.html">Student Lookup</a></li>
                    <li><a href="RegistartionForm.html">Apply Now</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 DSU. All Rights Reserved</p>
        </div>
    </footer>

</body>
</html>